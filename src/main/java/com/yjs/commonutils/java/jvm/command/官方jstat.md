# jstat
监视Java虚拟机（JVM）统计信息。此命令是实验性的，不受支持。

## 概要
jstat [ generalOption | outputOptions vmid [ interval [s | ms] [ count ]]

generalOption
单个通用命令行选项-help或-options。请参见常规选项。

outputOptions
一个或由单个的多输出选项statOption，加上任何的-t，-h和-J选项。请参见输出选项。

VMID
虚拟机标识符，它是指示目标JVM的字符串。一般语法如下：

[协议：] [//] lvmid [@hostname [：端口] /服务器名]
所述的语法vmid串对应于URI的语法。的vmid字符串可以从一个简单的整数，它表示一个本地JVM到更复杂的结构，它指定的通信协议，端口号，和其他特定于实现的值而变化。请参阅虚拟机标识符。

区间 [s | ms]
以指定单位，秒（s）或毫秒（ms）为单位的采样间隔。默认单位是毫秒。必须是正整数。指定时，该jstat命令会在每个间隔生成其输出。

计数
要显示的样本数。默认值为无穷大，导致jstat命令显示统计信息，直到目标JVM终止或jstat命令终止。该值必须是正整数。

描述
该jstat命令显示已检测的Java HotSpot VM的性能统计信息。目标JVM由其虚拟机标识符或vmid选项标识。

虚拟机标识符
所述的语法vmid串对应于URI的语法：

[协议：] [//] lvmid [@hostname [：端口] /服务器名]
协议
通信协议。如果省略协议值并且未指定主机名，则默认协议是特定于平台的优化本地协议。如果省略协议值并指定了主机名，则默认协议为rmi。

lvmid
目标JVM的本地虚拟机标识符。它lvmid是特定于平台的值，用于唯一标识系统上的JVM。它lvmid是虚拟机标识符唯一必需的组件。的lvmid是典型地但不是必须地，操作系统的目标JVM进程的进程标识符。您可以使用该jps命令来确定lvmid。此外，您可以lvmid使用该ps命令在Windows ，Linux和OS X平台上进行确定，并在Windows上使用Windows任务管理器确定。

主机名
指示目标主机的主机名或IP地址。如果省略hostname值，则目标主机是本地主机。

港口
用于与远程服务器通信的默认端口。如果省略hostname值或协议值指定优化的本地协议，则忽略端口值。否则，port参数的处理是特定于实现的。对于默认rmi协议，端口值指示远程主机上rmiregistry的端口号。如果省略端口值并且协议值指示rmi，则使用默认的rmiregistry端口（1099）。

服务器名称
servername参数的处理取决于实施。对于优化的本地协议，将忽略此字段。对于rmi协议，它表示远程主机上的RMI远程对象的名称。

选项
该jstat命令支持两种类型的选项，常规选项和输出选项。常规选项使jstat命令显示简单的用法和版本信息。输出选项确定统计输出的内容和格式。

所有选项及其功能在将来的版本中都可能会更改或删除。

常规选项
如果指定其中一个常规选项，则无法指定任何其他选项或参数。

-救命
显示帮助消息。

-options
显示静态选项列表。请参见输出选项。

输出选项
如果未指定常规选项，则可以指定输出选项。输出选项确定的内容和格式jstat命令的输出，并且由单个的statOption，加上任何的另一个输出选项（-h，-t，和-J）。在statOption必须先来。

输出格式化为表格，列由空格分隔。带标题的标题行描述列。使用该-h选项设置标题显示的频率。列标题名称在不同选项中是一致的。通常，如果两个选项提供具有相同名称的列，则两列的数据源是相同的。

使用该-t选项显示时间戳列，标记为Timestamp作为输出的第一列。Timestamp列包含自目标JVM启动以来经过的时间（以秒为单位）。时间戳的分辨率取决于各种因素，并且由于在高负载系统上延迟的线程调度而受到变化。

使用interval和count参数分别确定jstat命令显示其输出的频率和次数。

注意：不要编写脚本来解析jstat命令的输出，因为格式在将来的版本中可能会更改。如果编写解析jstat命令输出的脚本，则希望在将来的此工具版本中修改它们。

- statOption
确定jstat命令显示的统计信息。以下列出了可用选项。使用-options常规选项显示特定平台安装的选项列表。请参阅统计选项和输出。

class：显示有关类加载器行为的统计信息。

compiler：显示有关Java HotSpot VM实时编译器行为的统计信息。

gc：显示有关垃圾回收堆行为的统计信息。

gccapacity：显示有关代的容量及其相应空间的统计信息。

gccause：显示有关垃圾收集统计信息（-gcutil与之相同）的摘要，以及最后一个和当前（适用时）垃圾收集事件的原因。

gcnew：显示新一代行为的统计信息。

gcnewcapacity：显示有关新代及其相应空间大小的统计信息。

gcold：显示有关旧代和元空间统计信息行为的统计信息。

gcoldcapacity：显示有关旧一代大小的统计信息。

gcmetacapacity：显示有关元空间大小的统计信息。

gcutil：显示有关垃圾回收统计信息的摘要。

printcompilation：显示Java HotSpot VM编译方法统计信息。

-h ñ
每n个样本（输出行）显示一个列标题，其中n是一个正整数。默认值为0，它显示第一行数据的列标题。

-t
将时间戳列显示为输出的第一列。时间戳是从目标JVM的开始时间开始的时间。

-J javaOption
传递javaOption给Java应用程序启动器。例如，-J-Xms48m将启动内存设置为48 MB。有关选项的完整列表，请参阅java（1）。

统计选项和输出
以下信息总结了jstat命令为每个statOption输出的列。

### -class 选项
类加载器统计信息

Loaded：加载的类数。

Bytes：加载的kB数。

Unloaded：卸载的类数。

Bytes：卸载的Kbytes数。

Time：执行类加载和卸载操作所花费的时间。

- 编译器选项
Java HotSpot VM即时编译器统计信息。

Compiled：执行的编译任务数。

Failed：编译任务失败次数。

Invalid：已失效的编译任务数。

Time：执行编译任务所花费的时间。

FailedType：编译上次失败编译的类型。

FailedMethod：上次失败编译的类名和方法。

-gc 选项
垃圾收集堆统计信息。

S0C：当前幸存者空间0容量（kB）。

S1C：当前幸存者空间1容量（kB）。

S0U：幸存者空间0利用率（kB）。

S1U：幸存者空间1利用率（kB）。

EC：当前的伊甸园空间容量（kB）。

EU：伊甸园空间利用率（kB）。

OC：当前旧空间容量（kB）。

OU：旧空间利用率（kB）。

MC：元空间容量（kB）。

MU：Metacspace利用率（kB）。

CCSC：压缩类空间容量（kB）。

CCSU：使用的压缩类空间（kB）。

YGC：年轻一代垃圾收集活动的数量。

YGCT：年轻一代垃圾收集时间。

FGC：完整GC事件的数量。

FGCT：完全垃圾收集时间。

GCT：垃圾收集总时间。

-gccapacity 选项
内存池生成和空间容量。

NGCMN：最小新一代容量（kB）。

NGCMX：最大新一代容量（kB）。

NGC：当前的新一代容量（kB）。

S0C：当前幸存者空间0容量（kB）。

S1C：当前幸存者空间1容量（kB）。

EC：当前的伊甸园空间容量（kB）。

OGCMN：最小旧代容量（kB）。

OGCMX：最大旧代容量（kB）。

OGC：当前的旧代容量（kB）。

OC：当前旧空间容量（kB）。

MCMN：最小元空间容量（kB）。

MCMX：最大元空间容量（kB）。

MC：元空间容量（kB）。

CCSMN：压缩类空间最小容量（kB）。

CCSMX：压缩类空间最大容量（kB）。

CCSC：压缩类空间容量（kB）。

YGC：年轻一代GC事件的数量。

FGC：完整GC事件的数量。

### -gccause 选项
此选项显示与该选项相同的垃圾收集统计信息摘要-gcutil，但包括上次垃圾收集事件的原因以及（如果适用）当前垃圾收集事件的原因。
除了列出的列之外-gcutil，此选项还添加以下列。

LGCC：上次垃圾回收的原因

GCC：当前垃圾回收的原因

-gcnew 选项
新一代统计数据。

S0C：当前幸存者空间0容量（kB）。

S1C：当前幸存者空间1容量（kB）。

S0U：幸存者空间0利用率（kB）。

S1U：幸存者空间1利用率（kB）。

TT：终身门槛。

MTT：最大期限阈值。

DSS：期望的幸存者大小（kB）。

EC：当前的伊甸园空间容量（kB）。

EU：伊甸园空间利用率（kB）。

YGC：年轻一代GC事件的数量。

YGCT：年轻一代垃圾收集时间。

-gcnewcapacity 选项
新一代空间大小统计。

NGCMN：最小新一代容量（kB）。

NGCMX：最大新一代容量（kB）。

NGC：当前的新一代容量（kB）。

S0CMX：最大幸存者空间0容量（kB）。

S0C：当前幸存者空间0容量（kB）。

S1CMX：最大幸存者空间1容量（kB）。

S1C：当前幸存者空间1容量（kB）。

ECMX：最大伊甸园空间容量（kB）。

EC：当前的伊甸园空间容量（kB）。

YGC：年轻一代GC事件的数量。

FGC：完整GC事件的数量。

-gcold 选项
老一代和元空间行为统计。

MC：元空间容量（kB）。

MU：元空间利用率（kB）。

CCSC：压缩类空间容量（kB）。

CCSU：使用的压缩类空间（kB）。

OC：当前旧空间容量（kB）。

OU：旧空间利用率（kB）。

YGC：年轻一代GC事件的数量。

FGC：完整GC事件的数量。

FGCT：完全垃圾收集时间。

GCT：垃圾收集总时间。

-gcoldcapacity 选项
老一代大小统计。

OGCMN：最小旧代容量（kB）。

OGCMX：最大旧代容量（kB）。

OGC：当前的旧代容量（kB）。

OC：当前旧空间容量（kB）。

YGC：年轻一代GC事件的数量。

FGC：完整GC事件的数量。

FGCT：完全垃圾收集时间。

GCT：垃圾收集总时间。

-gcmetacapacity 选项
元空间大小统计。

MCMN：最小元空间容量（kB）。

MCMX：最大元空间容量（kB）。

MC：元空间容量（kB）。

CCSMN：压缩类空间最小容量（kB）。

CCSMX：压缩类空间最大容量（kB）。

YGC：年轻一代GC事件的数量。

FGC：完整GC事件的数量。

FGCT：完全垃圾收集时间。

GCT：垃圾收集总时间。

### -gcutil 选项
垃圾收集统计摘要。

S0：幸存者空间0利用率占空间当前容量的百分比。

S1：幸存者空间1占空间当前容量的百分比。

E：伊甸园空间利用率占空间当前容量的百分比。

O：旧空间利用率占空间当前容量的百分比。

M：元空间利用率占空间当前容量的百分比。

CCS：压缩的类空间利用率百分比。

YGC：年轻一代GC事件的数量。

YGCT：年轻一代垃圾收集时间。

FGC：完整GC事件的数量。

FGCT：完全垃圾收集时间。

GCT：垃圾收集总时间。

-printcompilation 选项
Java HotSpot VM编译方法统计。

Compiled：最近编译的方法执行的编译任务数。

Size：最近编译的方法的字节代码的字节数。

Type：最近编译的方法的编译类型。

Method：标识最近编译的方法的类名和方法名。类名使用斜杠（/）代替点（。）作为名称空间分隔符。方法名称是指定类中的方法。这两个字段的格式与HotSpot -XX:+PrintCompilation选项一致。

例子
本节介绍了使用lvmid为21891 监视本地JVM的一些示例。

gcutil选项
此示例附加到lvmid 21891并以250毫秒间隔获取7个样本，并显示 - gcutil选项指定的输出。

此示例的输出显示在第三个和第四个样本之间发生了年轻代收集。该集合耗时0.078秒，并将物体从伊甸园空间（E）升级到旧空间（O），导致旧空间利用率从66.80％增加到68.19％。在收集之前，幸存者空间利用率为97.02％，但在此收集之后，利用率为91.03％。

jstat -gcutil 21891 250 7
  S0 S1 EOM CCS YGC YGCT FGC FGCT GCT   
  0.0097.02 70.31 66.80 95.52 89.14 7 0.300 0 0.000 0.300
  0.0097.02 86.23 66.80 95.52 89.14 7 0.300 0 0.000 0.300
  0.0097.02 96.53 66.80 95.52 89.14 7 0.300 0 0.000 0.300
 91.03 0.00 1.98 68.19 95.89 91.24 8 0.378 0 0.000 0.378
 91.03 0.00 15.82 68.19 95.89 91.24 8 0.378 0 0.000 0.378
 91.03 0.00 17.80 68.19 95.89 91.24 8 0.378 0 0.000 0.378
 91.03 0.00 17.80 68.19 95.89 91.24 8 0.378 0 0.000 0.378
重复列标题字符串
此示例附加到lvmid 21891并以250毫秒的间隔采样，并按-gcnew选项指定显示输出。此外，它使用-h3选项在每3行数据后输出列标题。

除了显示重复的标题字符串之外，此示例还显示在第二个和第三个样本之间发生了一个年轻的GC。它的持续时间是0.001秒。该集合找到了足够的活跃数据，幸存者空间0利用率（S0U）将超过所需的幸存者大小（DSS）。结果，对象被提升到旧一代（在此输出中不可见），并且终点阈值（TT）从31降低到2。

另一个集合发生在第五和第六个样本之间。这个集合发现很少有幸存者，并将终身临界值恢复到31。

jstat -gcnew -h3 21891 250
 S0C S1C S0U S1U TT MTT DSS EC EU YGC YGCT
  64.0 64.0 0.0 31.7 31 31 32.0 512.0 178.6 249 0.203
  64.0 64.0 0.0 31.7 31 31 32.0 512.0 355.5 249 0.203
  64.0 64.0 35.4 0.0 2 31 32.0 512.0 21.9 250 0.204
 S0C S1C S0U S1U TT MTT DSS EC EU YGC YGCT
  64.0 64.0 35.4 0.0 2 31 32.0 512.0 245.9 250 0.204
  64.0 64.0 35.4 0.0 2 31 32.0 512.0 421.1 250 0.204
  64.0 64.0 0.0 19.0 31 31 32.0 512.0 84.4 251 0.204
 S0C S1C S0U S1U TT MTT DSS EC EU YGC YGCT
  64.0 64.0 0.0 19.0 31 31 32.0 512.0 306.7 251 0.204
为每个样本添加时间戳
此示例附加到lvmid 21891，并以250毫秒的间隔采集3个样本。该-t选项用于为第一列中的每个样本生成时间戳。

Timestamp列报告自目标JVM启动以来经过的时间（以秒为单位）。此外，-gcoldcapacity输出显示旧的容量（OGC）和旧的空间容量（OC）随着堆扩展以满足分配或促销需求而增加。在第81次完全垃圾收集（FGC）之后，旧代容量（OGC）从11,696 kB增长到13,820 kB。生成（和空间）的最大容量为60,544 kB（OGCMX），因此仍有扩展空间。

时间戳OGCMN OGCMX OGC OC YGC FGC FGCT GCT
          150.1 1408.0 60544.0 11696.0 11696.0 194 80 2.874 3.799
          150.4 1408.0 60544.0 13820.0 13820.0 194 81 2.938 3.863
          150.7 1408.0 60544.0 13820.0 13820.0 194 81 2.938 3.863
监视远程JVM的检测
此示例使用-gcutil选项将名为remote.domain的系统上的lvmid 40496附加到，并且每秒都会无限期地采样。

该lvmid与远程主机的名称结合起来，构建一个VMID的40496@remote.domain。此vmid导致使用rmi协议jstatd与远程主机上的默认服务器进行通信。jstatd使用rmiregistry命令将服务器定位到该命令remote.domain的默认端口rmiregistry（端口1099）。

jstat -gcutil 40496@remote.domain 1000
 ...输出省略
也可以看看